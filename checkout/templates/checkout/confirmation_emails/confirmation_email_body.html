<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmation</title>
</head>

<body
    style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
    <div style="border-bottom: 1px solid #ccc; margin-bottom: 20px; padding-bottom: 20px;">
        <p style="font-size: 18px; font-weight: bold;">Dear {{ order.full_name }},</p>
        <p>Thank you for your purchase and your contribution to shaping sustainable surf!</p>
        <p>You will find your order information below.</p>
    </div>

    <div style="background-color: #f9f9f9; border: 1px solid #ddd; padding: 15px; margin-bottom: 20px;">
        <h2 style="font-size: 18px; margin-top: 0;">Order Details:</h2>
        <p><strong>Order Number:</strong> {{ order.order_number }}</p>
        <p><strong>Order Date:</strong> {{ order.date }}</p>

        {% for item in order.items.all %}
        <div style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px;">
            <p><strong>Item:</strong> {{ item.product.name }}</p>
            <p><strong>Item Price:</strong> €{{ item.product.price }}</p>
            {% if item.product and item.product.video_url %}
            <p><strong>Tutorial:</strong> <a href="{{ item.product.video_url }}" target="_blank"
                    rel="noopener noreferrer" style="color: #007bff; text-decoration: none;">Click Here to Watch
                    Tutorial</a></p>
            {% endif %}
        </div>
        {% endfor %}
    </div>

    <div style="background-color: #f9f9f9; border: 1px solid #ddd; padding: 15px; margin-bottom: 20px;">
        <h2 style="font-size: 18px; margin-top: 0;">Billing Information:</h2>

        <table style="width: 100%; border-collapse: collapse;">
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Full Name:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.full_name }}</td>
            </tr>
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Address:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.street_address1 }}</td>
            </tr>
            {% if order.street_address2 %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Address 2:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.street_address2 }}</td>
            </tr>
            {% endif %}
            {% if order.county %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">County:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.county }}</td>
            </tr>
            {% endif %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Town or City:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.town_or_city }}</td>
            </tr>
            {% if order.postcode %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Postal Code:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.postcode }}</td>
            </tr>
            {% endif %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Country:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.country }}</td>
            </tr>
            {% if order.phone_number %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Phone Number:</td>
                <td style="padding: 5px 0; text-align: right;">{{ order.phone_number }}</td>
            </tr>
            {% endif %}
        </table>

        <h2 style="font-size: 18px; margin-top: 20px;">Order Summary:</h2>

        <table style="width: 100%; border-collapse: collapse;">
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Order Total:</td>
                <td style="padding: 5px 0; text-align: right;">€{{ order.order_total }}</td>
            </tr>
            {% if order.discount_code %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Discount Applied ({{ order.discount_code.code }}):</td>
                <td style="padding: 5px 0; text-align: right;">- €{{ order.discount_code.amount }}</td>
            </tr>
            {% endif %}
            <tr>
                <td style="padding: 5px 0; font-weight: bold;">Grand Total:</td>
                <td style="padding: 5px 0; text-align: right;">€{{ order.grand_total }}</td>
            </tr>
        </table>
    </div>

    <div style="border-top: 1px solid #ccc; margin-top: 20px; padding-top: 20px;">
        <p style="margin-bottom: 20px;">If you have any questions or feedback, please contact us at {{ contact_email }}.</p>
        <p>Sincerely,<br><span style="display: block; margin-top: 10px;">Your Team at Shaping Sustainable Surf</span></p>
    </div>
</body>
</html>
